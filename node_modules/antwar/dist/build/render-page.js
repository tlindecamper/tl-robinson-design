"use strict";

var _antwarConfig = require("antwar-config");

var _antwarConfig2 = _interopRequireDefault(_antwarConfig);

var _paths = require("../paths");

var _paths2 = _interopRequireDefault(_paths);

var _BodyContent = require("../BodyContent");

var _BodyContent2 = _interopRequireDefault(_BodyContent);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// TODO: what if a route isn't found?
module.exports = function renderPage(location, cb) {
  const allPages = _paths2.default.getAllPages(_antwarConfig2.default);
  const page = _paths2.default.getPageForPath(location, allPages);

  _antwarConfig2.default.render.page({
    location,
    content: (0, _BodyContent2.default)(page, allPages)
  }, (err, { html, context } = {}) => {
    if (err) {
      return cb(err);
    }

    return cb(null, { html, page, context });
  });
};